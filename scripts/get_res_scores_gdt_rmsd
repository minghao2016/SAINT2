
# Get the GDT_TS and RMSD to the native for each structure in
# a res_scores file (as generated by run_cotrans or run_invitro)

if [ $# -ne 2 ]
then
	echo "Usage: $0 res_scores native_pdb" 1>&2
	exit 1
fi

cat $1 | while :
do
	# read the current line

	read score file

	# check for end of file

	if [ $? != 0 ]
	then
		break
	fi

	# call TMscore and extract GDT_TS and RMSD values

	x=`TMscore $file $2 | awk '
	    /^GDT-TS/ { print $2; }
		/RMSD of / { print $NF; }'`
	rmsd=`echo $x | awk '{ print $1; }'`
	gdt=`echo $x | awk '{ print $2; }'`
	echo "$score $gdt $rmsd $file"
done

